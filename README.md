# Monitoring Service

## О проекте

Данный проект предназначен для отправки показаний различных показаний счетчиков (электроэнергия, вода, отопление и т.д.). Приложение включает в себя систему регистрации и авторизации пользователей. Также предусмотрено разделение ролей на ADMIN и USER. Роли пользователей имеют лишь доступ к определенным конечным точкам. Проект делится на 3 модуля: 
1. monitoring-app - основное приложение для работы с регистрацией, авторизацией, подачей показаний и т.д.
2. auditstarter - кастомный стартер, который активируется с помощью аннотации @EnableAudit. Записывает действия пользователей в БД.
3. timecountingstarter - кастомный стартер, который подсчитывает время выполнения метода и выводит значение на консоль. 

#### Есть следующие роли:
****ADMIN**** имеет следующие возможности:
  - Полный доступ к истории данных счетчиков всех пользователей.
  - Просмотр аудита действий всех пользователей.
  - Добавление нового типа счетчика.

****USER**** обладает следующими функциями:
  - Просмотр последнего поданного показаний счетчика.(Возможность отправки данных имеется только один раз в текущем месяце.)
  - Подачу показаний счетчиков. (Которые добавляет ***ADMIN***)
  - Получение данных для конкретного месяца.
  - Просмотр истории своих ранее поданных данных.

Endpoints для получения документации ( swagger ):
* http://localhost:8080/v3/api-docs
* http://localhost:8080/swagger-ui/index.html#/
## Запуск приложения

Для запуска приложения выполните следующие шаги:
- Откройте основной пакет и запустите стартовую точку приложения - `MonitoringApplication`.

Для работы с приложением необходимо запустить файл *docker-compose.yml*, который запустит контейнер с рабочей БД Postgres. 
  
Для запуска, в корне проекта введите `docker-compose up -d`.

    User - 'root' 
    Password - '1'

В корне приложения приложен файл JSON с URL по отправке HTTP запросов, сгенерированный с помощью Postman.

## Технологии

Проект использует следующие технологии:

    - java 17
    - lombok
    - JDBC
    - postgreSQL
    - docker container ( для работы postgres и testcontainer )
    - liquibasen
    - JSON Web Toke
    - mapstruct
    - postman
    - custom starter
    - swagger + swagger ui
    - spring boot

    ### Testing ###
    - testcontainer
    - junit
    - assertJ
    - mockito
    - mockMvc
    - spring boot test